{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-team-vue/src/pages/surveys/SurveysIndex.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/src/pages/surveys/SurveysIndex.vue","mtime":1651230815053},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgeyBjb21wdXRlZCwgZGVmaW5lQXN5bmNDb21wb25lbnQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGdldEluZGV4U3VydmV5IH0gZnJvbSAnfi9zZXJ2aWNlcy9zdXJ2ZXknOwppbXBvcnQgeyAkdG9hc3QgfSBmcm9tICd+L21haW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKF9fcHJvcHMsIF9yZWYpIHsKICAgIHZhciBleHBvc2UgPSBfcmVmLmV4cG9zZTsKICAgIGV4cG9zZSgpOwogICAgdmFyIEF0U2tlbGV0b24gPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0U2tlbGV0b24vQXRTa2VsZXRvbicpOwogICAgfSk7CiAgICB2YXIgQXRCdXR0b24gPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0QnV0dG9uL0F0QnV0dG9uJyk7CiAgICB9KTsKICAgIHZhciBBdFBhbmVsID0gZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KCd+L3BsdWdpbnMvYWxpZnRlY2gtdWkvY29tcG9uZW50cy9BdFBhbmVsL0F0UGFuZWwnKTsKICAgIH0pOwogICAgdmFyIEF0QWxlcnQgPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0QWxlcnQvQXRBbGVydCcpOwogICAgfSk7CiAgICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICB2YXIgYWxsU3VydmV5RGF0YSA9IHJlZihbXSk7CiAgICB2YXIgYWN0aXZlU3VydmV5cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hbGxTdXJ2ZXlEYXRhJHZhbHVlOwoKICAgICAgcmV0dXJuICgoX2FsbFN1cnZleURhdGEkdmFsdWUgPSBhbGxTdXJ2ZXlEYXRhLnZhbHVlKSA9PT0gbnVsbCB8fCBfYWxsU3VydmV5RGF0YSR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FsbFN1cnZleURhdGEkdmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChhY3RpdmVTdXJ2ZXkpIHsKICAgICAgICByZXR1cm4gYWN0aXZlU3VydmV5ID09PSBudWxsIHx8IGFjdGl2ZVN1cnZleSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aXZlU3VydmV5LmlzX2FjdGl2ZTsKICAgICAgfSkpIHx8IFtdOwogICAgfSk7CgogICAgdmFyIGdldFN1cnZleXMgPSBmdW5jdGlvbiBnZXRTdXJ2ZXlzKCkgewogICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgZ2V0SW5kZXhTdXJ2ZXkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBfcmVzcG9uc2UkZGF0YTsKCiAgICAgICAgYWxsU3VydmV5RGF0YS52YWx1ZSA9IHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhKSA9PT0gbnVsbCB8fCBfcmVzcG9uc2UkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc3BvbnNlJGRhdGEuZGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgdmFyIF9lcnJvciRyZXNwb25zZSwgX2Vycm9yJHJlc3BvbnNlJGRhdGE7CgogICAgICAgICR0b2FzdC5zaG93KHsKICAgICAgICAgIHRpdGxlOiAnRXJyb3InLAogICAgICAgICAgc3ViVGl0bGU6IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2Vycm9yJHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9lcnJvciRyZXNwb25zZSRkYXRhID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXJyb3IkcmVzcG9uc2UkZGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH07CgogICAgZ2V0U3VydmV5cygpOwogICAgdmFyIF9fcmV0dXJuZWRfXyA9IHsKICAgICAgQXRTa2VsZXRvbjogQXRTa2VsZXRvbiwKICAgICAgQXRCdXR0b246IEF0QnV0dG9uLAogICAgICBBdFBhbmVsOiBBdFBhbmVsLAogICAgICBBdEFsZXJ0OiBBdEFsZXJ0LAogICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICBhbGxTdXJ2ZXlEYXRhOiBhbGxTdXJ2ZXlEYXRhLAogICAgICBhY3RpdmVTdXJ2ZXlzOiBhY3RpdmVTdXJ2ZXlzLAogICAgICBnZXRTdXJ2ZXlzOiBnZXRTdXJ2ZXlzLAogICAgICBjb21wdXRlZDogY29tcHV0ZWQsCiAgICAgIGRlZmluZUFzeW5jQ29tcG9uZW50OiBkZWZpbmVBc3luY0NvbXBvbmVudCwKICAgICAgcmVmOiByZWYsCiAgICAgIGdldEluZGV4U3VydmV5OiBnZXRJbmRleFN1cnZleSwKICAgICAgJHRvYXN0OiAkdG9hc3QKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-team-vue/src/pages/surveys/SurveysIndex.vue"],"names":[],"mappings":";;;;AACE,SAAS,QAAT,EAAmB,oBAAnB,EAAyC,GAAzC,QAAoD,KAApD;AACA,SAAS,cAAT,QAA+B,mBAA/B;AACA,SAAS,MAAT,QAAuB,QAAvB;;;;;AACA,QAAM,UAAU,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,wDAAP,CAAN;AAAA,KAAD,CAAvC;AACA,QAAM,QAAQ,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,oDAAP,CAAN;AAAA,KAAD,CAArC;AACA,QAAM,OAAO,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,kDAAP,CAAN;AAAA,KAAD,CAApC;AACA,QAAM,OAAO,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,kDAAP,CAAN;AAAA,KAAD,CAApC;AACA,QAAM,OAAO,GAAG,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,aAAa,GAAG,GAAG,CAAC,EAAD,CAAzB;AACA,QAAM,aAAa,GAAG,QAAQ,CAAC,YAAM;AAAA;;AACnC,aAAO,yBAAA,aAAa,CAAC,KAAd,8EAAqB,MAArB,CAA4B,UAAA,YAAY;AAAA,eAAI,YAAJ,aAAI,YAAJ,uBAAI,YAAY,CAAE,SAAlB;AAAA,OAAxC,MAAwE,EAA/E;AACD,KAF6B,CAA9B;;AAGA,QAAM,UAAU,GAAG,SAAb,UAAa,GAAM;AACvB,MAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AACA,MAAA,cAAc,GACX,IADH,CACQ,UAAA,QAAQ,EAAI;AAAA;;AAChB,QAAA,aAAa,CAAC,KAAd,GAAsB,QAAtB,aAAsB,QAAtB,yCAAsB,QAAQ,CAAE,IAAhC,mDAAsB,eAAgB,IAAtC;AACD,OAHH,EAIG,KAJH,CAIS,UAAA,KAAK,EAAI;AAAA;;AACd,QAAA,MAAM,CAAC,IAAP,CAAY;AAAE,UAAA,KAAK,EAAE,OAAT;AAAkB,UAAA,QAAQ,EAAE,KAAF,aAAE,KAAF,0CAAE,KAAK,CAAE,QAAT,4EAAE,gBAAiB,IAAnB,yDAAE,qBAAuB,OAAnD;AAA4D,UAAA,IAAI,EAAE;AAAlE,SAAZ;AACD,OANH,EAOG,OAPH,CAOW;AAAA,eAAO,OAAO,CAAC,KAAR,GAAgB,KAAvB;AAAA,OAPX;AAQD,KAVD;;AAWA,IAAA,UAAU","sourcesContent":["<script setup>\n  import { computed, defineAsyncComponent, ref } from 'vue';\n  import { getIndexSurvey } from '~/services/survey';\n  import { $toast } from '~/main';\n  const AtSkeleton = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtSkeleton/AtSkeleton'));\n  const AtButton = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtButton/AtButton'));\n  const AtPanel = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtPanel/AtPanel'));\n  const AtAlert = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtAlert/AtAlert'));\n  const loading = ref(false);\n  const allSurveyData = ref([]);\n  const activeSurveys = computed(() => {\n    return allSurveyData.value?.filter(activeSurvey => activeSurvey?.is_active) || [];\n  });\n  const getSurveys = () => {\n    loading.value = true;\n    getIndexSurvey()\n      .then(response => {\n        allSurveyData.value = response?.data?.data;\n      })\n      .catch(error => {\n        $toast.show({ title: 'Error', subTitle: error?.response?.data?.message, type: 'error' });\n      })\n      .finally(() => (loading.value = false));\n  };\n  getSurveys();\n</script>\n\n<template>\n  <div class=\"pb-4\">\n    <h1 class=\"text-black font-bold text-2xl\">Опросы</h1>\n    <div class=\"grid gap-6 grid-cols-8 mb-6\">\n      <div class=\"contents\" v-if=\"loading\">\n        <div class=\"col-span-8\" v-for=\"i in 3\" :key=\"i\">\n          <div class=\"mt-4\">\n            <AtPanel>\n              <div>\n                <at-skeleton class=\"mb-4\" type=\"row\"></at-skeleton>\n                <at-skeleton type=\"row\"></at-skeleton>\n              </div>\n              <template #footer>\n                <div class=\"justify-end flex flex-grow\">\n                  <at-skeleton type=\"row\"></at-skeleton>\n                </div>\n              </template>\n            </AtPanel>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-span-8 mt-6\" v-else-if=\"!activeSurveys?.length\">\n        <at-alert type=\"warning\">Нет запущенных опросников</at-alert>\n      </div>\n\n      <div v-else class=\"col-span-8\" v-for=\"surveyData in activeSurveys\" :key=\"surveyData?.id\">\n        <div class=\"mt-4\">\n          <AtPanel>\n            <p class=\"text-black font-bold text-xl mb-2\">{{ surveyData?.title }}</p>\n            <p class=\"text-gray-600\">{{ surveyData?.description }}</p>\n            <template #footer>\n              <div class=\"justify-end flex flex-grow\">\n                <AtButton :to=\"{ name: 'survey.detail', params: { id: surveyData?.id } }\" color=\"primary\"\n                  >Пройти опрос</AtButton\n                >\n              </div>\n            </template>\n          </AtPanel>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped></style>\n"]}]}