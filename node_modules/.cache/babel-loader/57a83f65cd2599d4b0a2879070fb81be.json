{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/colleagues/ColleaguesBirthDay.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/colleagues/ColleaguesBirthDay.vue","mtime":1651230815034},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgZm9ybWF0RGF0ZVRvTG9jYWxlU3RyaW5nIH0gZnJvbSAnfi91dGlscy9wYXJzZXJzJzsKaW1wb3J0IHVzZVVzZXJBdmF0YXIgZnJvbSAnfi91dGlscy9ob29rcy91c2VVc2VyQXZhdGFyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb2xsZWFndWVzQmlydGhEYXknLAogIHByb3BzOiB7CiAgICBiaXJ0aERheXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICB2YXIgdXNlckF2YXRhciA9IHVzZVVzZXJBdmF0YXIoKTsKICAgIHZhciBzaG93QWxsQmlydGhEYXlzID0gcmVmKGZhbHNlKTsKICAgIHZhciBjb2xsZWFndWVzQmlydGhkYXkgPSByZWYoW10pOwogICAgdmFyIGNvbGxlYWd1ZXNCaXJ0aERheSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICFzaG93QWxsQmlydGhEYXlzLnZhbHVlICYmIHByb3BzLmJpcnRoRGF5cy5sZW5ndGggPj0gNSA/IHByb3BzLmJpcnRoRGF5cy5zbGljZSgwLCA2KSA6IHByb3BzLmJpcnRoRGF5czsKICAgIH0pOwoKICAgIHZhciBnZXRDb2xsZWFndWVOb3RpZmljYXRpb25CaXJ0aERhdGUgPSBmdW5jdGlvbiBnZXRDb2xsZWFndWVOb3RpZmljYXRpb25CaXJ0aERhdGUoYmlydGhfZGF0ZSkgewogICAgICB2YXIgZGF0ZU9mQmlydGggPSBuZXcgRGF0ZShiaXJ0aF9kYXRlKTsKICAgICAgdmFyIGRhdGVOb3cgPSBuZXcgRGF0ZSgpOwogICAgICByZXR1cm4gZGF0ZU5vdy5nZXREYXRlKCkgPT09IGRhdGVPZkJpcnRoLmdldERhdGUoKSAmJiBkYXRlT2ZCaXJ0aC5nZXRNb250aCgpID09PSBkYXRlTm93LmdldE1vbnRoKCk7CiAgICB9OwoKICAgIHZhciBnZXRDb2xsZWFndWVOb3RpZmljYXRpb25Ub21vcnJvd0JpcnRoRGF0ZSA9IGZ1bmN0aW9uIGdldENvbGxlYWd1ZU5vdGlmaWNhdGlvblRvbW9ycm93QmlydGhEYXRlKGJpcnRoX2RhdGUpIHsKICAgICAgdmFyIGRhdGVPZkJpcnRoID0gbmV3IERhdGUoYmlydGhfZGF0ZSk7CiAgICAgIHZhciBkYXRlTm93ID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIGRhdGVOb3cuZ2V0RGF0ZSgpICsgMSA9PT0gZGF0ZU9mQmlydGguZ2V0RGF0ZSgpICYmIGRhdGVPZkJpcnRoLmdldE1vbnRoKCkgPT09IGRhdGVOb3cuZ2V0TW9udGgoKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgc2hvd0FsbEJpcnRoRGF5czogc2hvd0FsbEJpcnRoRGF5cywKICAgICAgY29sbGVhZ3Vlc0JpcnRoRGF5OiBjb2xsZWFndWVzQmlydGhEYXksCiAgICAgIGdldFVzZXJJbWFnZTogdXNlckF2YXRhci5nZXRVc2VyUmVzaXplZEltYWdlLAogICAgICBjb2xsZWFndWVzQmlydGhkYXk6IGNvbGxlYWd1ZXNCaXJ0aGRheSwKICAgICAgZ2V0Q29sbGVhZ3VlTm90aWZpY2F0aW9uQmlydGhEYXRlOiBnZXRDb2xsZWFndWVOb3RpZmljYXRpb25CaXJ0aERhdGUsCiAgICAgIGdldENvbGxlYWd1ZU5vdGlmaWNhdGlvblRvbW9ycm93QmlydGhEYXRlOiBnZXRDb2xsZWFndWVOb3RpZmljYXRpb25Ub21vcnJvd0JpcnRoRGF0ZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvcm1hdERhdGVUb0xvY2FsZVN0cmluZzogZm9ybWF0RGF0ZVRvTG9jYWxlU3RyaW5nCiAgfQp9Ow=="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/colleagues/ColleaguesBirthDay.vue"],"names":[],"mappings":";AAmDE,SAAS,QAAT,EAAmB,GAAnB,QAA8B,KAA9B;AACA,SAAS,wBAAT,QAAyC,iBAAzC;AACA,OAAO,aAAP,MAA0B,6BAA1B;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,oBADO;AAEb,EAAA,KAAK,EAAE;AACL,IAAA,SAAS,EAAE;AAAE,MAAA,IAAI,EAAE,KAAR;AAAe,MAAA,OAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAAxB;AADN,GAFM;AAKb,EAAA,KALa,iBAKP,KALO,EAKA;AACX,QAAM,UAAS,GAAI,aAAa,EAAhC;AACA,QAAI,gBAAe,GAAI,GAAG,CAAC,KAAD,CAA1B;AACA,QAAI,kBAAiB,GAAI,GAAG,CAAC,EAAD,CAA5B;AACA,QAAM,kBAAiB,GAAI,QAAQ,CAAC,YAAM;AACxC,aAAO,CAAC,gBAAgB,CAAC,KAAlB,IAA2B,KAAK,CAAC,SAAN,CAAgB,MAAhB,IAA0B,CAArD,GAAyD,KAAK,CAAC,SAAN,CAAgB,KAAhB,CAAsB,CAAtB,EAAyB,CAAzB,CAAzD,GAAuF,KAAK,CAAC,SAApG;AACD,KAFkC,CAAnC;;AAIA,QAAM,iCAAgC,GAAI,SAApC,iCAAoC,CAAA,UAAS,EAAK;AACtD,UAAM,WAAU,GAAI,IAAI,IAAJ,CAAS,UAAT,CAApB;AACA,UAAM,OAAM,GAAI,IAAI,IAAJ,EAAhB;AACA,aAAO,OAAO,CAAC,OAAR,OAAsB,WAAW,CAAC,OAAZ,EAAtB,IAA+C,WAAW,CAAC,QAAZ,OAA2B,OAAO,CAAC,QAAR,EAAjF;AACD,KAJD;;AAMA,QAAM,yCAAwC,GAAI,SAA5C,yCAA4C,CAAA,UAAS,EAAK;AAC9D,UAAM,WAAU,GAAI,IAAI,IAAJ,CAAS,UAAT,CAApB;AACA,UAAM,OAAM,GAAI,IAAI,IAAJ,EAAhB;AACA,aAAO,OAAO,CAAC,OAAR,KAAoB,CAApB,KAA0B,WAAW,CAAC,OAAZ,EAA1B,IAAmD,WAAW,CAAC,QAAZ,OAA2B,OAAO,CAAC,QAAR,EAArF;AACD,KAJD;;AAMA,WAAO;AACL,MAAA,gBAAgB,EAAhB,gBADK;AAEL,MAAA,kBAAkB,EAAlB,kBAFK;AAGL,MAAA,YAAY,EAAE,UAAU,CAAC,mBAHpB;AAIL,MAAA,kBAAkB,EAAlB,kBAJK;AAKL,MAAA,iCAAiC,EAAjC,iCALK;AAML,MAAA,yCAAyC,EAAzC;AANK,KAAP;AAQD,GAjCY;AAkCb,EAAA,OAAO,EAAE;AACP,IAAA,wBAAwB,EAAxB;AADO;AAlCI,CAAf","sourcesContent":["<template>\n  <div class=\"px-3 w-80\">\n    <span class=\"font-bold text-lg\">Дни рождения</span>\n    <div class=\"grid grid-cols-1\">\n      <router-link\n        v-for=\"bday of colleaguesBirthDay\"\n        :key=\"bday.id\"\n        :to=\"{ name: 'colleagues.detail', params: { id: bday.id } }\"\n      >\n        <div\n          class=\"\n            my-3\n            relative\n            rounded-lg\n            flex\n            items-center\n            space-x-3\n            focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\n          \"\n        >\n          <div class=\"flex-shrink-0\">\n            <img\n              class=\"h-10 w-10 rounded-full object-cover bg-gray-300\"\n              :src=\"getUserImage(bday)\"\n              @error=\"getUserImage(bday, $event)\"\n              :alt=\"bday.name\"\n            />\n          </div>\n          <div class=\"flex-1 min-w-0\">\n            <span class=\"absolute inset-0\" aria-hidden=\"true\"></span>\n            <p class=\"text-sm font-medium text-gray-900\">{{ bday.name }}</p>\n            <p v-if=\"!getColleagueNotificationBirthDate(bday.birth_date)\" class=\"text-sm text-gray-500 truncate\">\n              {{ formatDateToLocaleString(bday.birth_date) }}\n            </p>\n            <div v-if=\"getColleagueNotificationBirthDate(bday.birth_date)\">\n              <p class=\"text-red-600\">Сегодня</p>\n            </div>\n            <div v-else-if=\"getColleagueNotificationTomorrowBirthDate(bday.birth_date)\">\n              <p class=\"text-green-600\">Завтра</p>\n            </div>\n          </div>\n        </div>\n      </router-link>\n    </div>\n    <div class=\"font-medium text-indigo-600 cursor-pointer\" @click=\"showAllBirthDays = !showAllBirthDays\">\n      <span>{{ !showAllBirthDays ? 'Показать весь список' : 'Скрыть список' }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { computed, ref } from 'vue';\n  import { formatDateToLocaleString } from '~/utils/parsers';\n  import useUserAvatar from '~/utils/hooks/useUserAvatar';\n\n  export default {\n    name: 'ColleaguesBirthDay',\n    props: {\n      birthDays: { type: Array, default: () => [] },\n    },\n    setup(props) {\n      const userAvatar = useUserAvatar();\n      let showAllBirthDays = ref(false);\n      let colleaguesBirthday = ref([]);\n      const colleaguesBirthDay = computed(() => {\n        return !showAllBirthDays.value && props.birthDays.length >= 5 ? props.birthDays.slice(0, 6) : props.birthDays;\n      });\n\n      const getColleagueNotificationBirthDate = birth_date => {\n        const dateOfBirth = new Date(birth_date);\n        const dateNow = new Date();\n        return dateNow.getDate() === dateOfBirth.getDate() && dateOfBirth.getMonth() === dateNow.getMonth();\n      };\n\n      const getColleagueNotificationTomorrowBirthDate = birth_date => {\n        const dateOfBirth = new Date(birth_date);\n        const dateNow = new Date();\n        return dateNow.getDate() + 1 === dateOfBirth.getDate() && dateOfBirth.getMonth() === dateNow.getMonth();\n      };\n\n      return {\n        showAllBirthDays,\n        colleaguesBirthDay,\n        getUserImage: userAvatar.getUserResizedImage,\n        colleaguesBirthday,\n        getColleagueNotificationBirthDate,\n        getColleagueNotificationTomorrowBirthDate,\n      };\n    },\n    methods: {\n      formatDateToLocaleString,\n    },\n  };\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}]}