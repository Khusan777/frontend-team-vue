{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/admin/Desktop/MyProjects/frontend-team-vue/src/plugins/aliftech-ui/utils/maska/directive.js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/src/plugins/aliftech-ui/utils/maska/directive.js","mtime":1651230815098},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FkbWluL0Rlc2t0b3AvTXlQcm9qZWN0cy9mcm9udGVuZC10ZWFtLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy53ZWFrLW1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgTWFza2EgZnJvbSAnLi9tYXNrYSc7CmltcG9ydCB7IGlzU3RyaW5nIH0gZnJvbSAnLi91dGlscyc7CgpmdW5jdGlvbiBnZXRPcHRzKG1hc2spIHsKICB2YXIgb3B0cyA9IHt9OwoKICBpZiAobWFzay5tYXNrKSB7CiAgICBvcHRzLm1hc2sgPSBBcnJheS5pc0FycmF5KG1hc2subWFzaykgPyBKU09OLnN0cmluZ2lmeShtYXNrLm1hc2spIDogbWFzay5tYXNrOwogICAgb3B0cy50b2tlbnMgPSBtYXNrLnRva2VucyA/IF9vYmplY3RTcHJlYWQoe30sIG1hc2sudG9rZW5zKSA6IHt9OwogIH0gZWxzZSB7CiAgICBvcHRzLm1hc2sgPSBBcnJheS5pc0FycmF5KG1hc2spID8gSlNPTi5zdHJpbmdpZnkobWFzaykgOiBtYXNrOwogIH0KCiAgcmV0dXJuIG9wdHM7Cn0KCmZ1bmN0aW9uIG5lZWRVcGRhdGUobWFzaykgewogIHJldHVybiAhKGlzU3RyaW5nKG1hc2sudmFsdWUpICYmIG1hc2sudmFsdWUgPT09IG1hc2sub2xkVmFsdWUgfHwgQXJyYXkuaXNBcnJheShtYXNrLnZhbHVlKSAmJiBKU09OLnN0cmluZ2lmeShtYXNrLnZhbHVlKSA9PT0gSlNPTi5zdHJpbmdpZnkobWFzay5vbGRWYWx1ZSkgfHwgbWFzay52YWx1ZSAmJiBtYXNrLnZhbHVlLm1hc2sgJiYgbWFzay5vbGRWYWx1ZSAmJiBtYXNrLm9sZFZhbHVlLm1hc2sgJiYgbWFzay52YWx1ZS5tYXNrID09PSBtYXNrLm9sZFZhbHVlLm1hc2spOwp9Cgp2YXIgZGlyZWN0aXZlID0gZnVuY3Rpb24gZGlyZWN0aXZlKCkgewogIHZhciBzdGF0ZSA9IG5ldyBXZWFrTWFwKCk7CiAgcmV0dXJuIGZ1bmN0aW9uIChlbCwgbWFzaykgewogICAgaWYgKCFtYXNrLnZhbHVlKSByZXR1cm47CgogICAgaWYgKHN0YXRlLmhhcyhlbCkgJiYgIW5lZWRVcGRhdGUobWFzaykpIHsKICAgICAgcmV0dXJuIHN0YXRlLmdldChlbCkudXBkYXRlVmFsdWUoZWwpOwogICAgfQoKICAgIHN0YXRlLnNldChlbCwgbmV3IE1hc2thKGVsLCBnZXRPcHRzKG1hc2sudmFsdWUpKSk7CiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IGRpcmVjdGl2ZSgpOw=="},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-team-vue/src/plugins/aliftech-ui/utils/maska/directive.js"],"names":["Maska","isString","getOpts","mask","opts","Array","isArray","JSON","stringify","tokens","needUpdate","value","oldValue","directive","state","WeakMap","el","has","get","updateValue","set"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,SAAzB;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAMC,IAAI,GAAG,EAAb;;AAEA,MAAID,IAAI,CAACA,IAAT,EAAe;AACbC,IAAAA,IAAI,CAACD,IAAL,GAAYE,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACA,IAAnB,IAA2BI,IAAI,CAACC,SAAL,CAAeL,IAAI,CAACA,IAApB,CAA3B,GAAuDA,IAAI,CAACA,IAAxE;AACAC,IAAAA,IAAI,CAACK,MAAL,GAAcN,IAAI,CAACM,MAAL,qBAAmBN,IAAI,CAACM,MAAxB,IAAmC,EAAjD;AACD,GAHD,MAGO;AACLL,IAAAA,IAAI,CAACD,IAAL,GAAYE,KAAK,CAACC,OAAN,CAAcH,IAAd,IAAsBI,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAtB,GAA6CA,IAAzD;AACD;;AAED,SAAOC,IAAP;AACD;;AAED,SAASM,UAAT,CAAoBP,IAApB,EAA0B;AACxB,SAAO,EACJF,QAAQ,CAACE,IAAI,CAACQ,KAAN,CAAR,IAAwBR,IAAI,CAACQ,KAAL,KAAeR,IAAI,CAACS,QAA7C,IACCP,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACQ,KAAnB,KAA6BJ,IAAI,CAACC,SAAL,CAAeL,IAAI,CAACQ,KAApB,MAA+BJ,IAAI,CAACC,SAAL,CAAeL,IAAI,CAACS,QAApB,CAD7D,IAECT,IAAI,CAACQ,KAAL,IAAcR,IAAI,CAACQ,KAAL,CAAWR,IAAzB,IAAiCA,IAAI,CAACS,QAAtC,IAAkDT,IAAI,CAACS,QAAL,CAAcT,IAAhE,IAAwEA,IAAI,CAACQ,KAAL,CAAWR,IAAX,KAAoBA,IAAI,CAACS,QAAL,CAAcT,IAHtG,CAAP;AAKD;;AAED,IAAMU,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMC,KAAK,GAAG,IAAIC,OAAJ,EAAd;AAEA,SAAO,UAACC,EAAD,EAAKb,IAAL,EAAc;AACnB,QAAI,CAACA,IAAI,CAACQ,KAAV,EAAiB;;AAEjB,QAAIG,KAAK,CAACG,GAAN,CAAUD,EAAV,KAAiB,CAACN,UAAU,CAACP,IAAD,CAAhC,EAAwC;AACtC,aAAOW,KAAK,CAACI,GAAN,CAAUF,EAAV,EAAcG,WAAd,CAA0BH,EAA1B,CAAP;AACD;;AAEDF,IAAAA,KAAK,CAACM,GAAN,CAAUJ,EAAV,EAAc,IAAIhB,KAAJ,CAAUgB,EAAV,EAAcd,OAAO,CAACC,IAAI,CAACQ,KAAN,CAArB,CAAd;AACD,GARD;AASD,CAZD;;AAcA,eAAeE,SAAS,EAAxB","sourcesContent":["import Maska from './maska';\nimport { isString } from './utils';\n\nfunction getOpts(mask) {\n  const opts = {};\n\n  if (mask.mask) {\n    opts.mask = Array.isArray(mask.mask) ? JSON.stringify(mask.mask) : mask.mask;\n    opts.tokens = mask.tokens ? { ...mask.tokens } : {};\n  } else {\n    opts.mask = Array.isArray(mask) ? JSON.stringify(mask) : mask;\n  }\n\n  return opts;\n}\n\nfunction needUpdate(mask) {\n  return !(\n    (isString(mask.value) && mask.value === mask.oldValue) ||\n    (Array.isArray(mask.value) && JSON.stringify(mask.value) === JSON.stringify(mask.oldValue)) ||\n    (mask.value && mask.value.mask && mask.oldValue && mask.oldValue.mask && mask.value.mask === mask.oldValue.mask)\n  );\n}\n\nconst directive = () => {\n  const state = new WeakMap();\n\n  return (el, mask) => {\n    if (!mask.value) return;\n\n    if (state.has(el) && !needUpdate(mask)) {\n      return state.get(el).updateValue(el);\n    }\n\n    state.set(el, new Maska(el, getOpts(mask.value)));\n  };\n};\n\nexport default directive();\n"]}]}