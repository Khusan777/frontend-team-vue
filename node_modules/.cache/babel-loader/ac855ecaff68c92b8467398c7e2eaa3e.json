{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/admin/Desktop/MyProjects/frontend-team-vue/src/services/auth.api.js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/src/services/auth.api.js","mtime":1651230815102},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FkbWluL0Rlc2t0b3AvTXlQcm9qZWN0cy9mcm9udGVuZC10ZWFtLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBhcGlDbGllbnQsIGNsZWFyQ29va2llIH0gZnJvbSAnfi9zZXJ2aWNlcy9hcGlDbGllbnQnOwppbXBvcnQgeyBhcHAgfSBmcm9tICd+L21haW4nOwppbXBvcnQgeyBvYmpDaGVja1R5cGUgfSBmcm9tICd+L3V0aWxzL2NvbXB1dGVGdW5jJzsKaW1wb3J0IHJvdXRlciBmcm9tICd+L3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICd+L3N0b3JlJzsKdmFyIEVORF9QT0lOVCA9ICcvYXV0aCc7Ci8qKgogKiBTZXQgYXV0aGVudGljYXRpb24gc2V0dGluZyBhZnRlciBsb2dpbgogKiBAcGFyYW0ge09iamVjdH0gcmVzCiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVtZW1iZXJNZQogKiBAcmV0dXJucyB7Kn0KICovCgp2YXIgc2V0QXV0aCA9IGZ1bmN0aW9uIHNldEF1dGgocmVzLCByZW1lbWJlck1lKSB7CiAgdmFyIF9kYXRhJGV4cGlyZXNfaW47CgogIHZhciBkYXRhID0gcmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLmRhdGE7CiAgdmFyIGFjY2Vzc1Rva2VuID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmFjY2Vzc190b2tlbjsKICB2YXIgdG9rZW5UeXBlID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnRva2VuX3R5cGU7CiAgdmFyIGV4cGlyZXNJbiA9IChfZGF0YSRleHBpcmVzX2luID0gZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLmV4cGlyZXNfaW4pICE9PSBudWxsICYmIF9kYXRhJGV4cGlyZXNfaW4gIT09IHZvaWQgMCA/IF9kYXRhJGV4cGlyZXNfaW4gOiAxOwogIHZhciB0b2tlbiA9IHRva2VuVHlwZSArICcgJyArIGFjY2Vzc1Rva2VuOwoKICBpZiAob2JqQ2hlY2tUeXBlKGFjY2Vzc1Rva2VuLCAnc3RyaW5nJykgJiYgb2JqQ2hlY2tUeXBlKHRva2VuVHlwZSwgJ3N0cmluZycpKSB7CiAgICB2YXIgX2FwcCRjb25maWckZ2xvYmFsUHJvOwoKICAgIHZhciAkY29va2llID0gKF9hcHAkY29uZmlnJGdsb2JhbFBybyA9IGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcykgPT09IG51bGwgfHwgX2FwcCRjb25maWckZ2xvYmFsUHJvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYXBwJGNvbmZpZyRnbG9iYWxQcm8uJGNvb2tpZTsKCiAgICBpZiAoJGNvb2tpZSkgewogICAgICBjbGVhckNvb2tpZSgpLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICRjb29raWUuc2V0KCdhdXRoJywgdG9rZW4sIHsKICAgICAgICAgIGV4cGlyZXM6IHJlbWVtYmVyTWUgPyAiIi5jb25jYXQoZXhwaXJlc0luLCAicyIpIDogJzFEJwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgYXBpQ2xpZW50LmRlZmF1bHRzLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuOwogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfTsKCnZhciBnZXRVc2VyID0gZnVuY3Rpb24gZ2V0VXNlcigpIHsKICByZXR1cm4gYXBpQ2xpZW50LmdldCgiIi5jb25jYXQoRU5EX1BPSU5ULCAiL3VzZXIiKSwgewogICAgcGFyYW1zOiB7CiAgICAgIGFwcDogJ0NsaWVudCcKICAgIH0KICB9KTsKfTsKLyoqCiAqIFNldCBhdXRob3JpemF0aW9uIGxvZ2luIHVzZXIKICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFJlcXVlc3QgcGFyYW1zCiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVtZW1iZXJNZQogKiBAcmV0dXJucyB7UHJvbWlzZTwqPn0KICovCgoKdmFyIGxvZ2luID0gZnVuY3Rpb24gbG9naW4ocGFyYW1zKSB7CiAgcmV0dXJuIGFwaUNsaWVudC5wb3N0KCIiLmNvbmNhdChFTkRfUE9JTlQsICIvbG9naW4tcGFzc3dvcmQiKSwgX29iamVjdFNwcmVhZCh7CiAgICByZW1lbWJlcl9tZTogdHJ1ZQogIH0sIHBhcmFtcykpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICBzZXRBdXRoKHJlc3BvbnNlLCBwYXJhbXMucmVtZW1iZXJfbWUpOwogICAgc3RvcmUuZGlzcGF0Y2goJ2F1dGgvZ2V0VXNlcicpOwogIH0pOwp9OwovKioKICogU2V0IGxvZ291dCB1c2VyCiAqIEByZXR1cm5zIHsgUHJvbWlzZTxBeGlvc1Jlc3BvbnNlPGFueT4+IH0KICovCgoKdmFyIGxvZ291dCA9IGZ1bmN0aW9uIGxvZ291dCgpIHsKICByZXR1cm4gYXBpQ2xpZW50LnBvc3QoIiIuY29uY2F0KEVORF9QT0lOVCwgIi9sb2dvdXQ/YXBwPUNsaWVudCIpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIGNsZWFyQ29va2llKCkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIGRlbGV0ZSBhcGlDbGllbnQuZGVmYXVsdHMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ2F1dGgnCiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge30pOwogICAgfSk7CiAgfSk7Cn07CgpleHBvcnQgeyBsb2dpbiwgbG9nb3V0LCBnZXRVc2VyIH07"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-team-vue/src/services/auth.api.js"],"names":["apiClient","clearCookie","app","objCheckType","router","store","END_POINT","setAuth","res","rememberMe","data","accessToken","access_token","tokenType","token_type","expiresIn","expires_in","token","$cookie","config","globalProperties","finally","set","expires","defaults","headers","getUser","get","params","login","post","remember_me","then","response","dispatch","logout","push","name"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,WAApB,QAAuC,sBAAvC;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,IAAMC,SAAS,GAAG,OAAlB;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAMC,UAAN,EAAqB;AAAA;;AACnC,MAAMC,IAAI,GAAGF,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEE,IAAlB;AACA,MAAMC,WAAW,GAAGD,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEE,YAA1B;AACA,MAAMC,SAAS,GAAGH,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEI,UAAxB;AACA,MAAMC,SAAS,uBAAGL,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEM,UAAT,+DAAuB,CAAtC;AACA,MAAMC,KAAK,GAAGJ,SAAS,GAAG,GAAZ,GAAkBF,WAAhC;;AAEA,MAAIR,YAAY,CAACQ,WAAD,EAAc,QAAd,CAAZ,IAAuCR,YAAY,CAACU,SAAD,EAAY,QAAZ,CAAvD,EAA8E;AAAA;;AAC5E,QAAMK,OAAO,4BAAGhB,GAAG,CAACiB,MAAJ,CAAWC,gBAAd,0DAAG,sBAA6BF,OAA7C;;AACA,QAAIA,OAAJ,EAAa;AACXjB,MAAAA,WAAW,GAAGoB,OAAd,CAAsB,YAAM;AAC1BH,QAAAA,OAAO,CAACI,GAAR,CAAY,MAAZ,EAAoBL,KAApB,EAA2B;AACzBM,UAAAA,OAAO,EAAEd,UAAU,aAAMM,SAAN,SAAqB;AADf,SAA3B;AAGD,OAJD;AAKAf,MAAAA,SAAS,CAACwB,QAAV,CAAmBC,OAAnB,CAA2B,eAA3B,IAA8CR,KAA9C;AACD;AACF;;AACD,SAAOT,GAAP;AACD,CAnBD;;AAqBA,IAAMkB,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM1B,SAAS,CAAC2B,GAAV,WAAiBrB,SAAjB,YAAmC;AAAEsB,IAAAA,MAAM,EAAE;AAAE1B,MAAAA,GAAG,EAAE;AAAP;AAAV,GAAnC,CAAN;AAAA,CAAhB;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAM2B,KAAK,GAAG,SAARA,KAAQ,CAAAD,MAAM;AAAA,SAClB5B,SAAS,CAAC8B,IAAV,WAAkBxB,SAAlB;AAAgDyB,IAAAA,WAAW,EAAE;AAA7D,KAAsEH,MAAtE,GAAgFI,IAAhF,CAAqF,UAAAC,QAAQ,EAAI;AAC/F1B,IAAAA,OAAO,CAAC0B,QAAD,EAAWL,MAAM,CAACG,WAAlB,CAAP;AACA1B,IAAAA,KAAK,CAAC6B,QAAN,CAAe,cAAf;AACD,GAHD,CADkB;AAAA,CAApB;AAMA;AACA;AACA;AACA;;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS;AAAA,SACbnC,SAAS,CAAC8B,IAAV,WAAkBxB,SAAlB,yBAAiD0B,IAAjD,CAAsD,YAAM;AAC1D/B,IAAAA,WAAW,GAAGoB,OAAd,CAAsB,YAAM;AAC1B,aAAOrB,SAAS,CAACwB,QAAV,CAAmBC,OAAnB,CAA2B,eAA3B,CAAP;AACArB,MAAAA,MAAM,CAACgC,IAAP,CAAY;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAZ,EAA8BhB,OAA9B,CAAsC,YAAM,CAAE,CAA9C;AACD,KAHD;AAID,GALD,CADa;AAAA,CAAf;;AAQA,SAASQ,KAAT,EAAgBM,MAAhB,EAAwBT,OAAxB","sourcesContent":["import { apiClient, clearCookie } from '~/services/apiClient';\nimport { app } from '~/main';\nimport { objCheckType } from '~/utils/computeFunc';\nimport router from '~/router';\nimport store from '~/store';\n\nconst END_POINT = '/auth';\n\n/**\n * Set authentication setting after login\n * @param {Object} res\n * @param {boolean} rememberMe\n * @returns {*}\n */\n\nconst setAuth = (res, rememberMe) => {\n  const data = res?.data;\n  const accessToken = data?.access_token;\n  const tokenType = data?.token_type;\n  const expiresIn = data?.expires_in ?? 1;\n  const token = tokenType + ' ' + accessToken;\n\n  if (objCheckType(accessToken, 'string') && objCheckType(tokenType, 'string')) {\n    const $cookie = app.config.globalProperties?.$cookie;\n    if ($cookie) {\n      clearCookie().finally(() => {\n        $cookie.set('auth', token, {\n          expires: rememberMe ? `${expiresIn}s` : '1D',\n        });\n      });\n      apiClient.defaults.headers['Authorization'] = token;\n    }\n  }\n  return res;\n};\n\nconst getUser = () => apiClient.get(`${END_POINT}/user`, { params: { app: 'Client' } });\n\n/**\n * Set authorization login user\n * @param {Object} params - Request params\n * @param {boolean} rememberMe\n * @returns {Promise<*>}\n */\n\nconst login = params =>\n  apiClient.post(`${END_POINT}/login-password`, { remember_me: true, ...params }).then(response => {\n    setAuth(response, params.remember_me);\n    store.dispatch('auth/getUser');\n  });\n\n/**\n * Set logout user\n * @returns { Promise<AxiosResponse<any>> }\n */\n\nconst logout = () =>\n  apiClient.post(`${END_POINT}/logout?app=Client`).then(() => {\n    clearCookie().finally(() => {\n      delete apiClient.defaults.headers['Authorization'];\n      router.push({ name: 'auth' }).finally(() => {});\n    });\n  });\n\nexport { login, logout, getUser };\n"]}]}