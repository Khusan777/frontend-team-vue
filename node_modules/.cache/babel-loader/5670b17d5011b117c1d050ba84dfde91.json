{"remainingRequest":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/profile/FeedBackToCompanyModal.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/profile/FeedBackToCompanyModal.vue","mtime":1651231450345},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/MyProjects/frontend-team-vue/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBkZWZpbmVBc3luY0NvbXBvbmVudCwgcmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHNlbmRGZWVkYmFjayB9IGZyb20gJ34vc2VydmljZXMvZmVlZGJhY2suYXBpJzsKaW1wb3J0IHsgJHRvYXN0IH0gZnJvbSAnfi9tYWluJzsKaW1wb3J0IHVzZVZ1ZWxpZGF0ZSBmcm9tICdAdnVlbGlkYXRlL2NvcmUnOwppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gJ0B2dWVsaWRhdGUvdmFsaWRhdG9ycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoX19wcm9wcywgX3JlZikgewogICAgdmFyIGV4cG9zZSA9IF9yZWYuZXhwb3NlOwogICAgZXhwb3NlKCk7CiAgICB2YXIgZmVlZGJhY2tCb2R5ID0gcmVmKCcnKTsKICAgIHZhciBtb2RhbCA9IHJlZihmYWxzZSk7CiAgICB2YXIgbW9kYWxMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIHZhciBzdWJtaXR0ZWQgPSByZWYoZmFsc2UpOwogICAgdmFyIGZlZWRiYWNrSW5wdXQgPSByZWYobnVsbCk7CgogICAgZnVuY3Rpb24gc2VuZEZlZWRiYWNrVG9Db21wYW55KCkgewogICAgICBzdWJtaXR0ZWQudmFsdWUgPSB0cnVlOwoKICAgICAgaWYgKHYkLnZhbHVlLiRpbnZhbGlkKSB7CiAgICAgICAgdiQudmFsdWUuJHRvdWNoKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBtb2RhbExvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICBzZW5kRmVlZGJhY2soewogICAgICAgIGJvZHk6IGZlZWRiYWNrQm9keS52YWx1ZSwKICAgICAgICBhbm9ueW06IHRydWUsCiAgICAgICAgZm9yX2NvbXBhbnk6IHRydWUsCiAgICAgICAgdG9fZW1wbG95ZWVfaWQ6IG51bGwsCiAgICAgICAgYWR2aWNlOiBmZWVkYmFja0JvZHkudmFsdWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgJHRvYXN0LnNob3coewogICAgICAgICAgdGl0bGU6ICfQo9GB0L/QtdGI0L3QvicsCiAgICAgICAgICBzdWJUaXRsZTogJ9CS0LDRiCDRhNC40LTQsdC10Log0YPRgdC/0LXRiNC90L4g0L7RgtC/0YDQsNCy0LvQtdC90L4nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIHN1Ym1pdHRlZC52YWx1ZSA9IGZhbHNlOwogICAgICAgIGZlZWRiYWNrQm9keS52YWx1ZSA9ICcnOwogICAgICAgIG1vZGFsLnZhbHVlID0gZmFsc2U7CiAgICAgICAgbW9kYWxMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGZlZWRiYWNrQm9keS52YWx1ZSA9ICcnOwogICAgICBtb2RhbC52YWx1ZSA9IGZhbHNlOwogICAgfTsKCiAgICB2YXIgYm50TG9nID0gZnVuY3Rpb24gYm50TG9nKCkgewogICAgICBtb2RhbC52YWx1ZSA9IHRydWU7CiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBmZWVkYmFja0lucHV0LnZhbHVlLmNoaWxkcmVuWzBdLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgcnVsZXMgPSB7CiAgICAgIGZlZWRiYWNrQm9keTogewogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgICB9CiAgICB9OwogICAgdmFyIHYkID0gdXNlVnVlbGlkYXRlKHJ1bGVzLCB7CiAgICAgIGZlZWRiYWNrQm9keTogZmVlZGJhY2tCb2R5CiAgICB9KTsKICAgIHZhciBBdE1vZGFsID0gZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KCd+L3BsdWdpbnMvYWxpZnRlY2gtdWkvY29tcG9uZW50cy9BdE1vZGFsL0F0TW9kYWwnKTsKICAgIH0pOwogICAgdmFyIEF0VGV4dGFyZWEgPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0VGV4dGFyZWEvQXRUZXh0YXJlYScpOwogICAgfSk7CiAgICB2YXIgQXRCdXR0b24gPSBkZWZpbmVBc3luY0NvbXBvbmVudChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJ34vcGx1Z2lucy9hbGlmdGVjaC11aS9jb21wb25lbnRzL0F0QnV0dG9uL0F0QnV0dG9uJyk7CiAgICB9KTsKICAgIHZhciBfX3JldHVybmVkX18gPSB7CiAgICAgIGZlZWRiYWNrQm9keTogZmVlZGJhY2tCb2R5LAogICAgICBtb2RhbDogbW9kYWwsCiAgICAgIG1vZGFsTG9hZGluZzogbW9kYWxMb2FkaW5nLAogICAgICBzdWJtaXR0ZWQ6IHN1Ym1pdHRlZCwKICAgICAgZmVlZGJhY2tJbnB1dDogZmVlZGJhY2tJbnB1dCwKICAgICAgc2VuZEZlZWRiYWNrVG9Db21wYW55OiBzZW5kRmVlZGJhY2tUb0NvbXBhbnksCiAgICAgIGNhbmNlbDogY2FuY2VsLAogICAgICBibnRMb2c6IGJudExvZywKICAgICAgcnVsZXM6IHJ1bGVzLAogICAgICB2JDogdiQsCiAgICAgIEF0TW9kYWw6IEF0TW9kYWwsCiAgICAgIEF0VGV4dGFyZWE6IEF0VGV4dGFyZWEsCiAgICAgIEF0QnV0dG9uOiBBdEJ1dHRvbiwKICAgICAgZGVmaW5lQXN5bmNDb21wb25lbnQ6IGRlZmluZUFzeW5jQ29tcG9uZW50LAogICAgICByZWY6IHJlZiwKICAgICAgbmV4dFRpY2s6IG5leHRUaWNrLAogICAgICBzZW5kRmVlZGJhY2s6IHNlbmRGZWVkYmFjaywKICAgICAgJHRvYXN0OiAkdG9hc3QsCiAgICAgIHVzZVZ1ZWxpZGF0ZTogdXNlVnVlbGlkYXRlLAogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"sources":["/Users/admin/Desktop/MyProjects/frontend-team-vue/src/components/profile/FeedBackToCompanyModal.vue"],"names":[],"mappings":";;;AACE,SAAS,oBAAT,EAA+B,GAA/B,EAAoC,QAApC,QAAoD,KAApD;AACA,SAAS,YAAT,QAA6B,yBAA7B;AACA,SAAS,MAAT,QAAuB,QAAvB;AACA,OAAO,YAAP,MAAyB,iBAAzB;AACA,SAAS,QAAT,QAAyB,uBAAzB;;;;;AAEA,QAAI,YAAY,GAAG,GAAG,CAAC,EAAD,CAAtB;AACA,QAAI,KAAK,GAAG,GAAG,CAAC,KAAD,CAAf;AACA,QAAM,YAAY,GAAG,GAAG,CAAC,KAAD,CAAxB;AACA,QAAI,SAAS,GAAG,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,aAAa,GAAG,GAAG,CAAC,IAAD,CAAzB;;AAEA,aAAS,qBAAT,GAAiC;AAC/B,MAAA,SAAS,CAAC,KAAV,GAAkB,IAAlB;;AAEA,UAAI,EAAE,CAAC,KAAH,CAAS,QAAb,EAAuB;AACrB,QAAA,EAAE,CAAC,KAAH,CAAS,MAAT;AACA;AACD;;AAED,MAAA,YAAY,CAAC,KAAb,GAAqB,IAArB;AACA,MAAA,YAAY,CAAC;AACX,QAAA,IAAI,EAAE,YAAY,CAAC,KADR;AAEX,QAAA,MAAM,EAAE,IAFG;AAGX,QAAA,WAAW,EAAE,IAHF;AAIX,QAAA,cAAc,EAAE,IAJL;AAKX,QAAA,MAAM,EAAE,YAAY,CAAC;AALV,OAAD,CAAZ,CAOG,IAPH,CAOQ,YAAM;AACV,QAAA,MAAM,CAAC,IAAP,CAAY;AACV,UAAA,KAAK,EAAE,SADG;AAEV,UAAA,QAAQ,EAAE,+BAFA;AAGV,UAAA,IAAI,EAAE;AAHI,SAAZ;AAKD,OAbH,EAcG,OAdH,CAcW,YAAM;AACb,QAAA,SAAS,CAAC,KAAV,GAAkB,KAAlB;AACA,QAAA,YAAY,CAAC,KAAb,GAAqB,EAArB;AACA,QAAA,KAAK,CAAC,KAAN,GAAc,KAAd;AACA,QAAA,YAAY,CAAC,KAAb,GAAqB,KAArB;AACD,OAnBH;AAoBD;;AAED,QAAM,MAAM,GAAG,SAAT,MAAS,GAAM;AACnB,MAAA,YAAY,CAAC,KAAb,GAAqB,EAArB;AACA,MAAA,KAAK,CAAC,KAAN,GAAc,KAAd;AACD,KAHD;;AAKA,QAAM,MAAM,GAAG,SAAT,MAAS,GAAM;AACnB,MAAA,KAAK,CAAC,KAAN,GAAc,IAAd;AACA,MAAA,QAAQ,CAAC,YAAM;AACb,QAAA,aAAa,CAAC,KAAd,CAAoB,QAApB,CAA6B,CAA7B,EAAgC,KAAhC;AACD,OAFO,CAAR;AAGD,KALD;;AAOA,QAAM,KAAK,GAAG;AACZ,MAAA,YAAY,EAAE;AAAE,QAAA,QAAQ,EAAR;AAAF;AADF,KAAd;AAIA,QAAM,EAAE,GAAG,YAAY,CAAC,KAAD,EAAQ;AAAE,MAAA,YAAY,EAAZ;AAAF,KAAR,CAAvB;AACA,QAAM,OAAO,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,kDAAP,CAAN;AAAA,KAAD,CAApC;AACA,QAAM,UAAU,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,wDAAP,CAAN;AAAA,KAAD,CAAvC;AACA,QAAM,QAAQ,GAAG,oBAAoB,CAAC;AAAA,aAAM,OAAO,oDAAP,CAAN;AAAA,KAAD,CAArC","sourcesContent":["<script setup>\n  import { defineAsyncComponent, ref, nextTick } from 'vue';\n  import { sendFeedback } from '~/services/feedback.api';\n  import { $toast } from '~/main';\n  import useVuelidate from '@vuelidate/core';\n  import { required } from '@vuelidate/validators';\n\n  let feedbackBody = ref('');\n  let modal = ref(false);\n  const modalLoading = ref(false);\n  let submitted = ref(false);\n  const feedbackInput = ref(null);\n\n  function sendFeedbackToCompany() {\n    submitted.value = true;\n\n    if (v$.value.$invalid) {\n      v$.value.$touch();\n      return;\n    }\n\n    modalLoading.value = true;\n    sendFeedback({\n      body: feedbackBody.value,\n      anonym: true,\n      for_company: true,\n      to_employee_id: null,\n      advice: feedbackBody.value,\n    })\n      .then(() => {\n        $toast.show({\n          title: 'Успешно',\n          subTitle: 'Ваш фидбек успешно отправлено',\n          type: 'success',\n        });\n      })\n      .finally(() => {\n        submitted.value = false;\n        feedbackBody.value = '';\n        modal.value = false;\n        modalLoading.value = false;\n      });\n  }\n\n  const cancel = () => {\n    feedbackBody.value = '';\n    modal.value = false;\n  };\n\n  const bntLog = () => {\n    modal.value = true;\n    nextTick(() => {\n      feedbackInput.value.children[0].focus();\n    });\n  };\n\n  const rules = {\n    feedbackBody: { required },\n  };\n\n  const v$ = useVuelidate(rules, { feedbackBody });\n  const AtModal = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtModal/AtModal'));\n  const AtTextarea = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtTextarea/AtTextarea'));\n  const AtButton = defineAsyncComponent(() => import('~/plugins/aliftech-ui/components/AtButton/AtButton'));\n</script>\n\n<template>\n  <div>\n    <AtButton\n      class=\"md:col-span-3 lg:col-span-3 whitespace-nowrap\"\n      color=\"success\"\n      size=\"sm\"\n      icon=\"mail\"\n      :block=\"true\"\n      @click=\"bntLog\"\n    >\n      Дать фидбек компании\n    </AtButton>\n    <AtModal v-model=\"modal\" title=\"Фидбек на Alif\">\n      <p class=\"text-md\">\n        Здесь вы можете оставить фидбек всей компании, если вас что-то не устраивает. Или вы можете предложить\n        что-нибудь улучшить\n      </p>\n      <div class=\"mt-2\">\n        <p class=\"text-lg text-black mb-1\">Ваш Фидбек</p>\n        <AtTextarea\n          v-model=\"feedbackBody\"\n          ref=\"feedbackInput\"\n          :error=\"submitted && v$.feedbackBody.$error\"\n          placeholder=\"\"\n        ></AtTextarea>\n        <p class=\"text-red-500\" v-if=\"submitted && v$.feedbackBody.$error\">Поле обязательно для заполнения</p>\n        <div class=\"flex space-x-3 mt-3\">\n          <AtButton class=\"w-full p-4\" @click=\"cancel\">Отмена</AtButton>\n          <AtButton class=\"w-full p-4\" color=\"primary\" :loading=\"modalLoading\" @click=\"sendFeedbackToCompany\">\n            Сохранить\n          </AtButton>\n        </div>\n      </div>\n    </AtModal>\n  </div>\n</template>\n\n<style scoped></style>\n"]}]}